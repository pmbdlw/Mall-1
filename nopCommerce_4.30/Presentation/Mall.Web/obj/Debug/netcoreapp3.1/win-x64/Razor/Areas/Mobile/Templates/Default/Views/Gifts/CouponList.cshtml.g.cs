#pragma checksum "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Gifts\CouponList.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "438ce3ef29744f3367c4dde0a4ae38d67cf80c37"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Mobile_Templates_Default_Views_Gifts_CouponList), @"mvc.1.0.view", @"/Areas/Mobile/Templates/Default/Views/Gifts/CouponList.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
#nullable restore
#line 10 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.ViewFeatures;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Html;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.Rendering;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Http.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.Razor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web.Framework;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web.Framework.Infrastructure;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.DTO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Service;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Entities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.CommonModel;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"438ce3ef29744f3367c4dde0a4ae38d67cf80c37", @"/Areas/Mobile/Templates/Default/Views/Gifts/CouponList.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"251375f151a8ed74fad18b07a59f5490bcea9ba2", @"/Areas/Mobile/Templates/Default/Views/_ViewImports.cshtml")]
    public class Areas_Mobile_Templates_Default_Views_Gifts_CouponList : Mall.Web.Framework.MobileWebViewPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Gifts\CouponList.cshtml"
  
    ViewBag.Title = "积分优惠券列表";
    ViewBag.ShowAside = 3;//显示浮动菜单栏、回到顶部按钮

#line default
#line hidden
#nullable disable
            WriteLiteral("<div class=\"container\">\r\n    <ul class=\"integral-coupon integral-product cl\" id=\"List\"></ul>\r\n    <div class=\"loading\" id=\"autoLoad\"><span></span></div>\r\n\r\n</div>\r\n<input type=\"hidden\" id=\"couponUri\"");
            BeginWriteAttribute("value", " value=\"", 282, "\"", 326, 1);
#nullable restore
#line 10 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Gifts\CouponList.cshtml"
WriteAttributeValue("", 290, Url.Action("AcceptCoupon","coupon"), 290, 36, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" />

<script>

    $(window).scroll(function () {
        var scrollTop = $(this).scrollTop();
        var scrollHeight = $(document).height();
        var windowHeight = $(this).height();

        if (scrollTop + windowHeight >= scrollHeight) {
            loadGifts();
        }
    });

    // 优惠券领取
    $(function () {
        $(""#List"").on('click', 'a[name=""acceptCoupon""]', function () {
            var $thisCoupon = $(this);
            var needi = $thisCoupon.data(""ni"");
            if ($thisCoupon.hasClass(""disabled"")) {
                return;
            }
            $.dialog.confirm(""此券需要"" + needi + ""积分，是否兑换？"", function () {
                var cpid = $thisCoupon.attr('cpid') || 0;
                var vshopid = $thisCoupon.attr('vshopid') || 0;
                var couponCon = $(""#couponUri"").val();
                if (parseInt(cpid) > 0) {
                    console.log(couponCon);
                    $.post(couponCon, { vshopid: vshopid, couponid: parseInt(cpid) }, func");
            WriteLiteral(@"tion (result) {
                        if (result.success == true) {
                            $.dialog.succeedTips(""兑换成功！"")
                            //$(""#Integral_balance"").html(result.Integral_balance);
                            // window.location.href = '/' + areaName + '/VShop/GetCouponSuccess/' + result.crid;
                        }
                        else {
                            $thisCoupon.addClass(""disabled"");
                            $.dialog.tips(result.msg, function () { });
                        }
                        return;
                    });
                }
            });
        });
    });

    var page = 0,
        isnodata = false,
        list = $('#List');

    loadGifts();

    function loadGifts() {
        var pageSize = 10;
        if (!isnodata) {
            page++;
            $.get('/' + areaName + '/Gifts/GetCouponList',
                {
                    pageNo: page,
                    pageSize: pageSize
 ");
            WriteLiteral(@"               }
                , function (data) {
                    console.log(JSON.stringify(data))
                    data = data.data;
                    if (data.length > 0) {
                        var str = '';
                        $.each(data, function (i, item) {
                            str += '<li>' +
                                '<div class=""p-img""><b style=""background-image: url(' + item.ShowIntegralCover + ');""></b></div>' +
                                '<div class=""p-text"">' +
                                '<h3>' + item.ShopName + '</h3>' +
                                '<p>' + (item.UseArea == 1 ? item.Remark : '全场通用') + '</p>' +
                                '<h5><span>¥ <em>' + item.Price + '</em></span>' + (item.OrderAmount > 0 ? ""满"" + item.OrderAmount + ""元可用"" : ""无门槛"") + '</h5>' +
                                '</div>' +
                                '<div class=""p-btn"">' +
                                '<p><span>' + item.NeedIntegral + '</span");
            WriteLiteral(@">分</p>' +
                                '<a name=""acceptCoupon"" data-ni=""' + item.NeedIntegral +'"" cpid=""' + item.Id + '"" vshopid=""' + item.VShopId + '"">兑换</a>' +
                                '</div>' +
                                '</li>';
                        });
                        list.append(str);
                    }
                    if (data.length < 10) {
                        isnodata = true;
                        $('#autoLoad').html('没有更多优惠券了');
                    }
                }
            );
        }
    }
</script>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
