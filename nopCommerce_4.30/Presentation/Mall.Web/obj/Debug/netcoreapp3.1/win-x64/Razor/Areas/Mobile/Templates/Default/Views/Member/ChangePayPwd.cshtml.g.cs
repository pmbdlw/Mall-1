#pragma checksum "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "fc26eee17e2e6d5fe58604f1e2ebd998d4df1377"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Mobile_Templates_Default_Views_Member_ChangePayPwd), @"mvc.1.0.view", @"/Areas/Mobile/Templates/Default/Views/Member/ChangePayPwd.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
#nullable restore
#line 10 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.ViewFeatures;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Html;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.Rendering;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Http.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.Razor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web.Framework;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web.Framework.Infrastructure;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.DTO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Service;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Entities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.CommonModel;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fc26eee17e2e6d5fe58604f1e2ebd998d4df1377", @"/Areas/Mobile/Templates/Default/Views/Member/ChangePayPwd.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"251375f151a8ed74fad18b07a59f5490bcea9ba2", @"/Areas/Mobile/Templates/Default/Views/_ViewImports.cshtml")]
    public class Areas_Mobile_Templates_Default_Views_Member_ChangePayPwd : Mall.Web.Framework.MobileWebViewPage<Mall.Entities.MemberInfo>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
  
	ViewBag.Title = "修改支付密码";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
            DefineSection("Styles", async() => {
                WriteLiteral(@"
	<style>
		.Acc-Manag .verification input.code{
			width:calc(100% - 105px);
		}

		.Acc-Manag .verification .btn {
			width: 100px;
			background: initial;
			display: inline-block;
			font-size: initial;
			color: initial;
			border: solid 1px;
			letter-spacing: inherit;
		}
		.pwd-success{
			position:fixed;
			top:0;
			left:0;
			width:100%;
			height:100%;
			display:none;
			background-color:white;
			text-align: center;
		}
		.pwd-success img{ width: 30%;margin: 80px 0 30px;}
		
	</style>
");
            }
            );
            WriteLiteral("\r\n<div class=\"container\">\r\n\t<div class=\"acc-safe clearfix\">\r\n\t\t<div class=\"list\">当前用户账号：");
#nullable restore
#line 39 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
                            Write(CurrentUser.UserName);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"<br></div>
	</div>
	<div class=""acc-safe clearfix"">
		<div class=""list"">我记得原支付密码<br></div>
		<span class=""glyphicon glyphicon-menu-right""></span>
	</div>
	<div class=""acc-safe clearfix"">
		<div class=""list"">我忘记支付密码了<br></div>
		<span class=""glyphicon glyphicon-menu-right""></span>
	</div>
</div>

<div class=""container hidden"">
	<div class=""Acc-Manag hidden"">
		<input name=""OldPayPwd"" type=""password"" placeholder=""原支付密码"" />
		<input name=""NewPayPwd"" type=""password"" placeholder=""新支付密码"" />
		<input type=""password"" placeholder=""确认支付密码"" />
		<input class=""btn"" type=""submit"" value=""提交"" />
	</div>

	<div class=""Acc-Manag hidden"">
		<h4>
			您绑定的手机号码为");
#nullable restore
#line 61 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
                 Write(string.IsNullOrEmpty(CurrentUser.CellPhone) ? "" : (CurrentUser.CellPhone.Substring(0, 3) + "****" + CurrentUser.CellPhone.Substring(7, 4)));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
		</h4>
		<input name=""NewPayPwd"" type=""password"" placeholder=""请输入新支付密码"" />
		<input type=""password"" placeholder=""请确认新支付密码"" />
		<div class=""verification"">
			<input name=""PhoneCode"" class=""code"" placeholder=""验证码"" />
			<button class=""btn code send-code"" id=""btnSendCode"" type=""button"">发送验证码</button>
		</div>
		<input name=""SendCodePluginId"" id=""SendCodePluginId"" type=""hidden"" value=""Mall.Plugin.Message.SMS"" />
		<input class=""btn"" type=""submit"" value=""提交"" />
	</div>
</div>
<div class=""pwd-success"">
	<img src=""/Areas/Mobile/Templates/Default/images/success.png"" />
	<p>重置成功，请妥善保管您的密码</p>
    <p><a style=""color:#2481d1""");
            BeginWriteAttribute("href", " href=\"", 2184, "\"", 2221, 1);
#nullable restore
#line 76 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
WriteAttributeValue("", 2191, Url.Action("Center","Member"), 2191, 30, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">返回个人中心</a></p>\r\n</div>\r\n<input type=\"hidden\"");
            BeginWriteAttribute("value", " value=\"", 2267, "\"", 2299, 1);
#nullable restore
#line 78 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
WriteAttributeValue("", 2275, Url.Action("BindPhone"), 2275, 24, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" id=\"urlBindPhone\" />\r\n<input type=\"hidden\"");
            BeginWriteAttribute("value", " value=\"", 2343, "\"", 2378, 1);
#nullable restore
#line 79 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
WriteAttributeValue("", 2351, Url.Action("ChangePayPwd"), 2351, 27, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" id=\"urlChangePayPwd\" />\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n\t<script>\r\n\t\t$(function () {\r\n\t\t\tvar count = 120;\r\n\t\t\tvar sended = false;\r\n\t\t\tvar btnSendCode = $(\'#btnSendCode\');\r\n\t\t\tvar hasCellPhone=");
#nullable restore
#line 87 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Member\ChangePayPwd.cshtml"
                         Write(string.IsNullOrEmpty(CurrentUser.CellPhone)?"false":"true");

#line default
#line hidden
#nullable disable
                WriteLiteral(@";

			function countDown1() {
				btnSendCode.html(count + 's后重发');
				if (count == 1) {
					btnSendCode.html('重新发送');
					sended = false;
					count = 120;
					return;
				} else {
					setTimeout(countDown1, 1000);
				}
				count--;
			}

			$('.container .acc-safe').click(function () {
				var index = $(this).index()-1;
				if(index==-1){
					return;
				}
				if(index==1&&hasCellPhone==false)
				{
				    $.dialog.alertTips('您未绑定手机，请先绑定手机',function(){
				        window.location.href=$('#urlBindPhone').val()+'?returnUrl='+$('#urlChangePayPwd').val();
				    });
				    
					return false;
				}

				$('.container').toggleClass('hidden');
				var container = $(this).closest('.container').next();
				$('.Acc-Manag', container).addClass('hidden');
				$('.Acc-Manag:eq({0})'.format(index), container).removeClass('hidden');
			});

			$('#btnSendCode').click(function () {
				if (sended != false)
					return;
				sended = true;

			    $.post('SendFindCode', { pl");
                WriteLiteral(@"uginId: $('#SendCodePluginId').val() }, function (result) {
					if (result.success) {
						setTimeout(countDown1, 1000);
					} else {
						sended = false;
						$.dialog.errorTips('发送验证码失败,' + result.msg);
					}
				}).error(function () {
					sended = false;
					$.dialog.errorTips('发送验证码失败');
				});
			});

			$('.Acc-Manag input:submit').click(function () {
				var parent = $(this).parent();
				var oldPwdInput = $('input[name=OldPayPwd]', parent);
				var newPwdInput = $('input[name=NewPayPwd]', parent);
				var paramets = {};
				if (oldPwdInput.length > 0)
				{
					var oldPwd = oldPwdInput.val();
					if ($.isNullOrEmpty(oldPwd)) {
						$.dialog.errorTips('请输入原支付密码');
						return false;
					}
					paramets.oldPayPwd = oldPwd;
				}

				var newPwd = newPwdInput.val();
				if ($.isNullOrEmpty(newPwd)) {
					$.dialog.errorTips('请输入新支付密码');
					return false;
				}

				if (newPwdInput.next().val() != newPwd){
					$.dialog.errorTips('两次密码输入不一致');
					return");
                WriteLiteral(@" false;
				}

				paramets.newPayPwd = newPwd;

				var phoneCodeInput = $('input[name=PhoneCode]',parent);
				if (phoneCodeInput.length > 0) {
					var phoneCode = phoneCodeInput.val();
					if ($.isNullOrEmpty(phoneCode)) {
						$.dialog.errorTips('请输入手机验证码');
						return false;
					}
					paramets.phoneCode = phoneCode;
				}

				paramets.sendCodePluginId = $('input[name=SendCodePluginId]',parent).val();

				$.post(location.href, paramets, function (data) {
					if (data.success)
						$('div.pwd-success').show();
					else if (data.msg)
						$.dialog.errorTips(data.msg);
				}).error(function () {
					$.dialog.errorTips('操作失败，请稍后再试！');
				});
			});
		});
	</script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Mall.Entities.MemberInfo> Html { get; private set; }
    }
}
#pragma warning restore 1591
