#pragma checksum "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "9aa5324263a969e356a4c95d9dfc0b4dc513721b"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Mobile_Templates_Default_Views_Order_ShopBranchs), @"mvc.1.0.view", @"/Areas/Mobile/Templates/Default/Views/Order/ShopBranchs.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
#nullable restore
#line 10 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.ViewFeatures;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Html;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.Rendering;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Http.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Mvc.Razor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using System.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web.Framework;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Web.Framework.Infrastructure;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.DTO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Service;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.Entities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\_ViewImports.cshtml"
using Mall.CommonModel;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9aa5324263a969e356a4c95d9dfc0b4dc513721b", @"/Areas/Mobile/Templates/Default/Views/Order/ShopBranchs.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"251375f151a8ed74fad18b07a59f5490bcea9ba2", @"/Areas/Mobile/Templates/Default/Views/_ViewImports.cshtml")]
    public class Areas_Mobile_Templates_Default_Views_Order_ShopBranchs : Mall.Web.Framework.MobileWebViewPage<Mall.Web.Areas.Mobile.Models.ShopBranchModel>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml"
  
    ViewBag.Title = "选择自提点";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<style>
    li span span {
        width: 100%;
    }
</style>

<div class=""container shop-branch"">
    <ul id=""list"">
        <li>暂无门店数据</li>
    </ul>
</div>

<div id=""template"" style=""display:none"">
    <div class=""branch-check"">
        <input id=""rdo{index}"" type=""radio"" name=""shopBranch"" value=""{id}"" data-name=""{shopBranchName}"" {state} />
    </div>
    <div class=""branch-info"">
        <p class=""branch-name""><label for=""rdo{index}"">{shopBranchName}</label><span class=""sb_distance"">{shopBranchDistance}</span></p>
        <p><span class=""{msg.class}"" style=""color: #fff; background: #f8413d;padding: 0 10px; border-radius: 2px;"">#该门店缺货</span></p>
        <p class=""branch-tel""><em>联系方式：</em>{contactPhone}</p>
        <p class=""branch-addr"">{addressDetail}</p>
    </div>
</div>

<script>
	var shopId=");
#nullable restore
#line 31 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml"
          Write(Model.ShopId);

#line default
#line hidden
#nullable disable
            WriteLiteral(";\r\n\tvar regionId=");
#nullable restore
#line 32 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml"
            Write(Model.RegionId);

#line default
#line hidden
#nullable disable
            WriteLiteral(";\r\n\tvar skuIds=\'");
#nullable restore
#line 33 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml"
           Write(string.Join(",",Model.SkuIds));

#line default
#line hidden
#nullable disable
            WriteLiteral("\'.split(\',\');\r\n\tvar counts=\'");
#nullable restore
#line 34 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml"
           Write(string.Join(",",Model.Counts));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"'.split(',');
	var _page=1;
	var cacheKey='ChoseShopBranch.Value';
	var cacheValue=window.getFromLocalStorate(cacheKey);
	var lodeEnd = false,total=0;
	function loadData(){
	    if (lodeEnd)
	        return;
	    var loading = showLoading();

		$.post('./GetShopBranchs', {shopId:shopId, regionId:regionId, getParent:true, skuIds:skuIds, counts:counts, page:_page,rows:10,shippingAddressId:'");
#nullable restore
#line 44 "C:\S\nopCommerce_4.30_dev\Presentation\Mall.Web\Areas\Mobile\Templates\Default\Views\Order\ShopBranchs.cshtml"
                                                                                                                                                     Write(ViewBag.ShippingAddressId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"'}, function (data) {
            if (data) {
                data = data.data;
		        total = data.total;
				loading.close();
				var list=$('#list');
				if(data.rows.length>0){
				    if(_page==1)
				        list.html('');
				    _page++;
				    if (total == data.rows.length){
				        lodeEnd = true;
				    }
				}else{
				    lodeEnd=true;
				    return;
				}

				var html=[];
				var template=$('#template').html();
				for (var i = 0; i < data.rows.length; i++) {
					var item=data.rows[i];
					if($.notNullOrEmpty(cacheValue)&&cacheValue.sbId==item.id)
						item.state='checked';
					item.index=i;
					if(item.enabled==true)
						item.msg={""class"":""hide""};
					else
                        item.state = 'disabled';

                    item.shopBranchDistance = """";
                    if (item.distance > 0) {
                        if (item.distance > 1000) {
                            item.shopBranchDistance = (item.distance / 1000).toFixed(2) + ""KM"";");
            WriteLiteral(@"
                        } else {
                            item.shopBranchDistance = item.distance + ""M"";
                        }
                        item.shopBranchDistance = ""距离"" + item.shopBranchDistance ;
                    }
					html.push(template.formatProperty(item));
				}

				list.append('<li class=""clearfix 1"">{0}</li>'.format(html.join('</li ><li class=""clearfix 2"">')));
			}
		});
	}
	$(function(){
		if($.notNullOrEmpty(cacheValue))
			cacheValue=cacheValue[shopId];
		loadData();

		$(window).scroll(function () {
			var scrollTop = $(this).scrollTop();
			var scrollHeight = $(document).height();
			var windowHeight = $(this).height();

			if (scrollTop + windowHeight >= scrollHeight) {
				loadData();
			}
		});

		$('#list').on('change','input:radio',function(){
		    if(this.checked==true){
		    	$(this).next().addClass(""active"");
		    	saveChose(this.value,$(this).data('name'));
                var refer = window.localStorage.getItem(""refer"");
		  ");
            WriteLiteral(@"  	if(refer!=null&&refer!=''){
                    window.localStorage.removeItem(""refer"");
		    	    window.location.href=refer;
		    	}
			}
		});

		function saveChose(sbId,sbName) {
			var value=window.getFromLocalStorate(cacheKey);
			if($.isNullOrEmpty(value))
				value={};
			value[shopId]={sbId:sbId,sbName:sbName,regionId:regionId};
			window.saveToLocalStorage(cacheKey, value);
		}
	});
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Mall.Web.Areas.Mobile.Models.ShopBranchModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
